/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/ui/core/Element"],function(jQuery,t,e){"use strict";var i={createQuickView:function(t,e,i,r){var o=new sap.ui.model.odata.ODataModel(t,false);var s=new sap.ui.ux3.QuickView({firstTitle:"{title}",firstTitleHref:"{titleLinkURL}",type:"{Thing/text}",icon:"{imageURL}"});s.setModel(o);s.bindObject("/QuickviewConfigs(name='"+e+"',thingKey='"+i+"')",{expand:"Thing,QVAttributes/Attribute,QVActions/Action"});var u=new a;u.bindAggregation("items",{path:"QVAttributes",factory:function(t,e){var i=new n(t,{label:"{Attribute/label}",link:"{valueLinkURL}",order:"{order}"});i.bindProperty("value","value",r&&r[e.getProperty("Attribute/name")]);return i}});s.addContent(u);return s},createQuickViewData:function(t,e,i,r,o){var s=new sap.ui.model.odata.ODataModel(e,false);t.removeAllContent();t.setModel(s);t.bindProperty("firstTitle","title");t.bindProperty("firstTitleHref","titleLinkURL");t.bindProperty("type","Thing/text");t.bindProperty("icon","imageURL");t.bindObject("/QuickviewConfigs(name='"+i+"',thingKey='"+r+"')",{expand:"Thing,QVAttributes/Attribute,QVActions/Action"});var u=new a;u.bindAggregation("items",{path:"QVAttributes",factory:function(t,e){var i=new n(t,{label:"{Attribute/label}",link:"{valueLinkURL}",order:"{order}"});i.bindProperty("value","value",o&&o[e.getProperty("Attribute/name")]);return i}});t.addContent(u)},createDataSetQuickView:function(t,e,i,n,a){var r=new sap.ui.model.odata.ODataModel(t,false);if(a){r.setSizeLimit(a)}var o=new sap.ui.ux3.QuickView({type:i,showActionBar:false});o.setModel(r);o.addContent(this._createDSContent(o,e,n));return o},createDataSetQuickViewData:function(t,e,i,n,a,r){var o=new sap.ui.model.odata.ODataModel(e,false);if(r){o.setSizeLimit(r)}t.removeAllContent();t.setType(n);t.setShowActionBar(false);t.setModel(o);t.addContent(this._createDSContent(t,i,a))},_createDSContent:function(t,e,i){var n=new sap.ui.commons.layout.MatrixLayout;var a=new sap.ui.commons.layout.MatrixLayoutRow;jQuery.each(i,function(t,e){var i;if(e.href){i=new sap.ui.commons.Link({text:e.value,href:e.href})}else{i=new sap.ui.commons.TextView({text:e.value})}var n=new sap.ui.commons.layout.MatrixLayoutCell({content:[i]});n.addStyleClass("quickViewDS");a.addCell(n)});n.bindAggregation("rows",e,a);return n}};var n=e.extend("sap.ui.suite.hcm.QvItem",{metadata:{properties:{label:"string",value:"string",link:"string",order:"string",type:"string"}}});var a=t.extend("sap.ui.suite.hcm.QvContent",{metadata:{aggregations:{items:{type:"sap.ui.suite.hcm.QvItem",multiple:true}}},init:function(){this._sorted=false},exit:function(){if(this._oML){this._oML.destroy()}},renderer:function(t,e){t.write("<div");t.writeControlData(e);t.write(">");t.renderControl(e._createQVContent(e));t.write("</div>")},_createQVContent:function(t){var e=new sap.ui.commons.layout.MatrixLayout({widths:["75px"]}),i=t.getItems(),n,a,r,o,s;if(this._oML){this._oML.destroy()}t._sortItems(t);for(var u=0;u<i.length;u++){n=new sap.ui.commons.layout.MatrixLayoutRow;a=new sap.ui.commons.layout.MatrixLayoutCell({vAlign:"Top"});r=new sap.ui.commons.Label({text:i[u].getLabel()+":"});a.addContent(r);n.addCell(a);a=new sap.ui.commons.layout.MatrixLayoutCell;if(i[u].getLink()){s=new sap.ui.commons.Link({text:i[u].getValue(),href:i[u].getLink()});a.addContent(s)}else{o=new sap.ui.commons.TextView({text:i[u].getValue()});a.addContent(o)}n.addCell(a);e.addRow(n)}this._oML=e;return e},_sortItems:function(t){if(!t._sorted){var e=t.removeAllAggregation("items",true);e.sort(function(t,e){return parseInt(t.getOrder())-parseInt(e.getOrder())});jQuery.each(e,function(e,i){t.addAggregation("items",i,false)});t._sorted=true}}});return i},true);
//# sourceMappingURL=QuickViewUtils.js.map