{"version":3,"file":"RuleSetLoader.js","names":["sap","ui","define","Log","extend","ObjectPath","VersionInfo","RuleSet","CommunicationBus","channelNames","RuleSerializer","constants","EvalUtils","Utils","jQuery","getAbsoluteUrl","a","url","document","createElement","href","replace","sCustomSuffix","sSupportModulePath","require","toUrl","sSupportModuleRootPath","sAbsUrl","RuleSetLoader","_mRuleSets","getRuleSets","this","addRuleSet","sLibName","oRuleSet","getRuleSet","_fetchSupportRuleSets","fnReadyCbk","mLibraries","that","mLoadedLibraries","getCore","getLoadedLibraries","oLibNamesWithRulesPromise","_fetchLibraryNamesWithSupportRules","oMainPromise","Promise","resolve","load","library","then","oCoreLibInfo","versionInfo","oLibNamesWithRules","libFetchPromises","_fetchLibraryFiles","_fetchRuleSet","all","_bRulesCreated","publish","UPDATE_SUPPORT_RULES","sRuleSet","serialize","oVersionInfo","loadAdditionalRuleSets","aLibNames","aLibFetchPromises","oLoadedLibraries","mainResolve","canLoadInternalRulesAsync","bCanLoadInternalRules","oLibNames","publicRules","internalRules","allRules","aAllMetaPromises","Object","keys","forEach","oMetaPromise","rcFilePath","ajax","type","dataType","success","data","lib","rcData","error","push","metaArgs","metaInfo","bHasRules","indexOf","fnProcessFile","bSupressProgressReporting","aAjaxPromises","supportModulePath","supportModulesRoot","canLoadInternalRules","bHasInternalRules","length","iProgress","iRulesNumber","supportModeConfig","getConfiguration","getSupportMode","bSilentMode","reportCurrentLoadingProgress","iPercentileProgressValue","Math","ceil","CURRENT_LOADING_PROGRESS","value","oLibName","libraryNames","_registerLibraryPath","oLibPublicRulesPromise","_requireRuleSet","customizableLibName","oLibPrivateRulesPromise","internalLibName","libraryName","libResourceName","customizableLibResourceName","loadFromSupportOrigin","_getLoadFromSupportOrigin","pathsConfig","internalLibResourceName","libraryInternalResourceRoot","loader","config","paths","sLibraryName","call","ex","sNormalizedLibName","oLibSupportCopy","oLibrary","oLibSupport","get","support","ruleset","_createRuleSet","_mRules","e","SUPPORT_ASSISTANT_NAME","coreUri","URL","baseURI","supportUri","origin","fetchNonLoadedRuleSets","aLoadedLibraries","oLibraries","libraries","oLib","name","bind","aNonLoadedLibraries","POST_AVAILABLE_LIBRARIES","libNames","_onLibraryChanged","oEvent","getParameter","_oMainPromise","updateRuleSets","oLibrarySupport","niceName","i","Array","isArray","k","addRule","getAllRules","mRules","map","getRules","getAllRuleDescriptors","sRuleId","libName","ruleId","isEvalAllowed","TEMP_RULESETS_NAME"],"sources":["RuleSetLoader-dbg.js"],"mappings":"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"}