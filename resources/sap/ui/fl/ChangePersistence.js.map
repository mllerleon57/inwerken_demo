{"version":3,"file":"ChangePersistence.js","names":["sap","ui","define","union","includes","merge","UriParameters","Log","JsControlTreeModifier","Component","Applier","ChangesUtils","FlexObject","FlexObjectFactory","DependencyHandler","VariantManagementState","FlexState","StorageUtils","Settings","Condenser","Storage","Version","Cache","Change","LayerUtils","Layer","Utils","JSONModel","Measurement","ChangePersistence","mComponent","this","_mComponent","_mChanges","createEmptyDependencyMap","_bChangesMapCreated","_mChangesInitial","name","error","Error","_aDirtyChanges","_oMessagebundle","undefined","_mChangesEntries","_bHasChangesOverMaxLayer","HIGHER_LAYER_CHANGES_EXIST","getChangeInstance","oFileContent","oChangeOrChangeContent","oChange","getId","fileName","changeType","createFromFileContent","setState","states","PERSISTED","prototype","getComponentName","getCacheKey","oAppComponent","preconditionsFulfilled","sFileType","sVariantManagementReference","sVariantReference","sSelectorId","getFileType","getVariantReference","getSelector","id","oChangeContent","fileType","variantManagementReference","variantReference","selector","bControlVariantChange","getChangesForComponent","mPropertyBag","bInvalidateCache","getUShellService","then","oURLParsingService","_oUShellURLParsingService","getChangesFillingCache","bind","oWrappedChangeFileContent","oChangeFileContent","component","getAppComponentForControl","bHasFlexObjects","isStorageResponseFilled","changes","aChanges","messagebundle","getModel","some","layer","VENDOR","oModel","setModel","sCurrentLayer","currentLayer","bFilterMaxLayer","ignoreMaxLayerParameter","fnFilter","filterChangeOrChangeDefinitionsByCurrentLayer","isLayerFilteringRequired","filterChangeForMaxLayer","filter","bIncludeControlVariants","includeCtrlVariants","aFilteredVariantChanges","_getAllCtrlVariantChanges","concat","_checkAndGetChangeInstances","map","isOverMaxLayer","getLayerFromChangeOrChangeContent","sChangeLayer","isA","getLayer","bIncludeCtrlVariants","getInitialChanges","reference","reduce","aResult","sVariantChangeType","loadChangesMapForComponent","createChangeMap","start","forEach","addChangeAndUpdateDependencies","end","getChangesMapForComponent","getOpenDependentChangesForControl","oSelector","getControlIdBySelector","getInitalDependencyClone","mInitialDependencies","mDependencies","copyDependencies","oInitialDependency","aNewValidDependencies","sControlId","aNewValidControlDependencies","controlsDependencies","oDependentControlSelector","bySelector","push","mControlsWithDependencies","dependencies","length","copyDependenciesFromInitialChangesMapSync","fnDependencyValidation","call","sChangeId","mDependentChangesOnMe","copyDependenciesFromInitialChangesMap","oPreviousPromise","bDependencyIsStillValid","Promise","resolve","oReferenceChange","setInitialApplyState","insertChange","_addRunTimeCreatedChangeAndUpdateDependencies","addRuntimeChangeAndUpdateDependencies","getAllUIChanges","includeDirtyChanges","getDirtyChanges","Boolean","compareAgainstCurrentLayer","isChangeMapCreated","getChangesForView","filterChangeByView","addChange","vChange","addDirtyChange","_addPropagationListener","oNewChange","indexOf","oComponent","fnCheckIsNotFlPropagationListener","fnPropagationListener","_bIsSapUiFlFlexControllerApplyChangesOnControl","bNoFlPropagationListenerAttached","getPropagationListeners","every","oFlexControllerFactory","require","oFlexController","create","applyAllChangesForControl","addPropagationListener","_deleteNotSavedChanges","aCondensedChanges","bAlreadyDeletedViaCondense","oCondensedChange","removeChange","deleteChange","convertToFileContent","checkIfOnlyOne","sFunctionName","aProperties","aUniqueProperties","sValue","iIndex","shouldCondensingBeEnabled","bCondenserEnabled","sLayer","CUSTOMER","USER","oUriParameters","fromURL","window","location","href","has","get","isBackendCondensingEnabled","bEnabled","getInstanceOrUndef","isCondensingEnabled","updateCacheAndDeleteUnsavedChanges","aAllChanges","bSkipUpdateCache","_massUpdateCacheAndDirtyState","getAllRelevantChangesForCondensing","aDirtyChanges","aDraftFilenames","aPersistedAndSameLayerChanges","getState","saveDirtyChanges","sParentVersion","aRelevantChangesForCondensing","bIsCondensingEnabled","aChangesClone","slice","aDirtyChangesClone","aRequests","getRequests","aStates","getStates","NEW","oCondensedChangesPromise","condense","sRequest","allChanges","condensedChanges","transport","isLegacyVariant","parentVersion","oResponse","write","flexObjects","prepareDirtyChanges","saveSequenceOfDirtyChanges","oFirstNewChange","aNewChanges","shift","oDirtyChange","performSingleSaveAction","_updateCacheAndDirtyState","oFirstChange","Number","Draft","getRequest","DELETED","remove","flexObject","oExistingDirtyChange","isChangeRelatedToVariants","updateVariantsState","changeToBeAddedOrDeleted","DIRTY","updateChange","sState","bRunTimeCreatedChange","nIndexInDirtyChanges","splice","_deleteChangeInMap","markForDeletion","sChangeKey","removeChangeFromMap","removeChangeFromDependencies","isLocalAndInLayer","oObject","isPersistedAndInLayer","getAllCompVariantsEntities","aCompVariantEntities","mCompVariantsMap","getCompVariantsMap","sPersistencyKey","sId","byId","transportAllUIChanges","oRootControl","sStyleClass","aAppVariantDescriptors","aLocalChanges","publish","transportDialogSettings","rootControl","styleClass","localChanges","appVariantDescriptors","_getChangesFromMapByNames","aNames","removeDirtyChanges","vLayer","oControl","sGenerator","aChangeTypes","aLayers","aChangesToBeRemoved","bChangeValid","getSupportInformation","generator","vSelector","getChangeType","nIndex","resetChanges","aSelectorIds","bSelectorIdsProvided","bChangeTypesProvided","isPublicLayerAvailable","isApplicationReset","aCompVariantsEntries","mParams","selectorIds","changeTypes","reset","aChangesToRevert","response","oChangeContentId","removeChanges"],"sources":["ChangePersistence-dbg.js"],"mappings":"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"}