{"version":3,"file":"Applier.js","names":["sap","ui","define","Log","Element","JsControlTreeModifier","FlexCustomData","Utils","DependencyHandler","FlUtils","oLastPromise","FakePromise","_checkControlAndDependentSelectorControls","oChange","mPropertyBag","oSelector","getSelector","id","name","Promise","reject","Error","modifier","bySelectorTypeIndependent","appComponent","view","then","oControl","aDependentControlSelectorList","getDependentControlSelectorList","forEach","sDependentControlSelector","oDependentControl","bySelector","_checkAndAdjustChangeStatusSync","mChangesMap","oFlexController","mControl","getControlIfTemplateAffected","oModifier","bHasAppliedCustomData","sync","getAppliedCustomDataValue","control","bIsCurrentlyAppliedOnControl","hasChangeApplyFinishedCustomData","bChangeStatusAppliedFinished","isApplyProcessFinished","fnCheckFunction","checkIfDependencyIsStillValidSync","bind","_oChangePersistence","copyDependenciesFromInitialChangesMapSync","setInitialApplyState","setRevertData","getParsedRevertDataFromCustomData","markSuccessful","markFailed","_isXmlModifier","targets","_checkAndAdjustChangeStatus","bXmlModifier","oAppliedCustomData","all","aCustomDataState","oAppComponent","oPromise","checkIfDependencyIsStillValid","copyDependenciesFromInitialChangesMap","oParsedRevertDataFromCustomData","undefined","_checkPreconditions","sErrorMessage","getJsOnly","_handleAfterApply","oInitializedControl","resolve","updateAggregation","originalControl","getContent","boundAggregation","addAppliedCustomData","oResult","success","_handleAfterApplyError","oError","error","sChangeId","getId","sLogMessage","bErrorOccurred","sCustomDataIdentifier","getCustomDataIdentifier","notApplicableChangesCustomDataKey","formatAndLogMessage","message","failedChangesCustomDataKeyXml","stack","failedChangesCustomDataKeyJs","addFailedCustomData","_logApplyChangeError","sChangeType","getChangeType","sTargetControlId","fullQualifiedName","getNamespace","getFileType","sWarningMessage","warning","adjustOriginalSelector","oPropertyBag","oCurrentOriginalControl","originalSelectorToBeAdjusted","oActualOriginalControl","getBindingInfo","template","getParent","aStack","oTempControl","push","aggregation","sParentAggregationName","index","getAggregation","indexOf","reverse","oInfo","addDependentControl","registerOnAfterXMLChangeProcessingHandler","aOnAfterXMLChangeProcessingHandlers","oChangeHandler","iChangeHandlerIndex","findIndex","mHandler","handler","length","controls","includes","Applier","addPreConditionForInitialChangeApplying","applyChangeOnControl","pHandlerPromise","changeHandler","getChangeHandler","hasApplyProcessStarted","addPromiseForApplyProcessing","startApplying","applyChange","catch","applyAllChangesForControl","fnGetChangesMap","sControlId","aChangesForControl","mChanges","getViewForControl","_ignoreOnce","setQueuedForApply","aPromiseStack","bControlWithDependencies","mControlsWithDependencies","removeControlsDependencies","resolveDependenciesForChange","mDependencies","fnCallback","addChangeApplyCallbackToDependency","execPromiseQueueSequentially","processDependentQueue","applyAllChangesForXMLView","aChanges","Array","isArray","reduce","oPreviousPromise","oReturnedControl","onAfterXMLChangeProcessing","oReturn"],"sources":["Applier-dbg.js"],"mappings":"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"}