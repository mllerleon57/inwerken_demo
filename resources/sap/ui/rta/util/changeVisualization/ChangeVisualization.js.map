{"version":3,"file":"ChangeVisualization.js","names":["sap","ui","define","Fragment","difference","deepEqual","JsControlTreeModifier","Control","OverlayRegistry","ElementUtil","PersistenceWriteAPI","Layer","FlUtils","ResourceModel","JSONModel","ChangeIndicator","ChangeIndicatorRegistry","ChangeCategories","_onClick","oPopover","this","getPopover","isOpen","close","ChangeVisualization","extend","metadata","library","properties","rootControlId","type","isActive","defaultValue","aggregations","popover","multiple","constructor","_oChangeIndicatorRegistry","changeCategories","getCategories","prototype","apply","arguments","_oTextBundle","getCore","getLibraryResourceBundle","setModel","bundle","_oChangeVisualizationModel","active","getIsActive","setDefaultBindingMode","_sSelectedChangeCategory","ALL","_bSetModeChanged","_fnOnClickHandler","bind","setRootControlId","sRootControlId","getRootControlId","_reset","setProperty","_getComponent","getAppComponentForControl","getElementInstance","setIsActive","bActiveState","_updateVisualizationModel","exit","destroy","_toggleRootOverlayClickHandler","reset","_updateVisualizationModelMenuData","aVisualizedChanges","getData","visualizedChanges","aHiddenChanges","aAllRegisteredChanges","getAllRegisteredChanges","forEach","oRegisteredChange","oVisualizedChange","find","change","getId","id","dependent","push","aCommandData","Object","keys","map","sChangeCategoryName","sTitle","_getChangeCategoryLabel","_getChangesForChangeCategory","length","key","count","title","icon","getIconForCategory","unshift","hiddenChanges","popupInfoMessage","getText","sChangeCategory","aChanges","filter","oChange","changeCategory","undefined","iChangesCount","sLabelKey","toUpperCase","_getChangeCategoryButton","sButtonKey","openChangeCategorySelectionPopover","oEvent","_oToolbarButton","byId","getParameter","load","name","createId","controller","then","addDependent","openBy","setPopover","onChangeCategorySelection","sSelectedChangeCategory","getSource","getBindingContext","getObject","_selectChangeCategory","sChangeCategoryText","changeCategoryText","_updateChangeIndicators","_setFocusedIndicator","_getCommandForChange","sCommand","getSupportInformation","command","oComponent","oSelectorControl","bySelector","getSelector","oLastDependentSelector","getDependentSelectorList","slice","oLastDependentSelectorControl","searchForCommand","oOverlay","sAggregationName","oControl","getElement","getDesignTimeMetadata","getCommandName","getChangeType","oParentOverlay","getParentElementOverlay","oParentAggregationOverlay","getParentAggregationOverlay","getAggregationName","getOverlay","_collectChanges","mPropertyBag","selector","invalidateCache","currentLayer","CUSTOMER","includeDirtyChanges","onlyCurrentVariants","_getUIChanges","_updateChangeRegistry","aRegisteredChangeIds","getRegisteredChangeIds","oCurrentChanges","getFileType","reduce","oChanges","aCurrentChangeIds","sChangeIdToRemove","removeChange","aPromises","sChangeIdToAdd","oChangeToAdd","sCommandName","registerChange","Promise","all","selectChange","sChangeId","_selectChange","aDependentElements","getRegisteredChange","visualizationInfo","dependentElementIds","sElementId","oOverlayDomRef","getDomRef","scrollIntoViewIfNeeded","classList","add","addEventListener","remove","once","oData","setData","assign","oSelectors","getSelectorsWithRegisteredChanges","oIndicators","sSelectorId","aRelevantChanges","_filterRelevantChanges","some","oElementOverlay","affectedElementId","oRelevantContainer","getRelevantContainer","isVisible","oOverlayPosition","getClientRects","left","top","posX","parseInt","posY","changes","oChangeIndicator","getChangeIndicator","sOverlayId","_createChangeIndicator","getOverlayId","setOverlayId","content","aChangeVizInfo","Array","isArray","oRootData","oChangeVizInfo","visible","overlayId","selectorId","bindElement","getModel","registerChangeIndicator","applyChanges","aVisibleIndicators","getChangeIndicators","oIndicator","getVisible","sort","oIndicator1","oIndicator2","iDeltaY","getPosY","iDeltaX","getPosX","iIndex","tabIndex","focus","bEnable","oRootOverlayDomRef","oRootOverlay","capture","removeEventListener","triggerModeChange","oRootControl","oToolbar","oMenuButton","getControl"],"sources":["ChangeVisualization-dbg.js"],"mappings":"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"}