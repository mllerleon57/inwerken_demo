/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","sap/ui/core/Popup","sap/ui/core/ResizeHandler","sap/ui/core/delegate/ItemNavigation","./SplitterRenderer","sap/ui/core/library"],function(jQuery,t,e,i,s,r,o,n){"use strict";var a=n.Orientation;var h=e.extend("sap.ui.commons.Splitter",{metadata:{library:"sap.ui.commons",deprecated:true,properties:{splitterOrientation:{type:"sap.ui.core.Orientation",group:"Behavior",defaultValue:a.Vertical},splitterPosition:{type:"sap.ui.core.Percentage",group:"Behavior",defaultValue:"50%"},minSizeFirstPane:{type:"sap.ui.core.Percentage",group:"Behavior",defaultValue:"0%"},minSizeSecondPane:{type:"sap.ui.core.Percentage",group:"Behavior",defaultValue:"0%"},width:{type:"sap.ui.commons.SplitterSize",group:"Behavior",defaultValue:"100%"},height:{type:"sap.ui.commons.SplitterSize",group:"Behavior",defaultValue:"100%"},showScrollBars:{type:"boolean",group:"Behavior",defaultValue:true},splitterBarVisible:{type:"boolean",group:"Behavior",defaultValue:true}},aggregations:{firstPaneContent:{type:"sap.ui.core.Control",multiple:true,singularName:"firstPaneContent"},secondPaneContent:{type:"sap.ui.core.Control",multiple:true,singularName:"secondPaneContent"}}}});h.prototype.onBeforeRendering=function(){if(this.sResizeListenerId){s.deregister(this.sResizeListenerId);this.sResizeListenerId=null}if(this.sSpecialResizeListenerId){s.deregister(this.sSpecialResizeListenerId);this.sSpecialResizeListenerId=null}};h.prototype.onAfterRendering=function(){this._recalculateInternals();this.sResizeListenerId=s.register(this.splitterDIV,jQuery.proxy(this.onresize,this))};h.prototype._recalculateInternals=function(){this.splitterDIV=this.getDomRef();this.splitterBar=document.getElementById(this.getId()+"_SB");this.firstPane=document.getElementById(this.getId()+"_firstPane");this.secondPane=document.getElementById(this.getId()+"_secondPane");this.minSizeFP=this.getMinSizeFirstPane();this.minSizeSP=this.getMinSizeSecondPane();this.minSizeFP=this.minSizeFP.substring(0,this.minSizeFP.length-1);this.minSizeFP=parseFloat(this.minSizeFP);this.minSizeSP=this.minSizeSP.substring(0,this.minSizeSP.length-1);this.minSizeSP=parseFloat(this.minSizeSP);this.spOrientation=this.getSplitterOrientation();this.sBarPosition=this.getSplitterPosition();this.sBarPosition=this.sBarPosition.substring(0,this.sBarPosition.length-1);this.sBarPosition=parseFloat(this.sBarPosition);if(sap.ui.getCore().getConfiguration().getTheme()=="sap_hcb"){this.sbSize=6}else{this.sbSize=4}this.resizeSplitterElements();var t=jQuery(this.splitterBar).height();if(this.spOrientation==a.Vertical){if(t<=0||t>jQuery(this.splitterDIV).height()){this.fixHeight()}}else{if(t<=0||t!=this.sbSize){this.fixHeight()}}};h.prototype.onresize=function(t){this.resizeSplitterElements()};h.prototype.resizeSplitterElements=function(){var t,e,i,s,r,o;if(this.spOrientation==a.Vertical){i=jQuery(this.splitterDIV).width();if(i==0){i=100}t=this.sbSize*100/i;if(this.sBarPosition>=100||this.sBarPosition+t>100){this.sBarPosition=100-t;r=0}else{r=100-t-this.sBarPosition}jQuery(this.firstPane).css("width",this.sBarPosition+"%");jQuery(this.splitterBar).css("width",t+"%");jQuery(this.secondPane).css("width",r+"%")}else{s=jQuery(this.splitterDIV).height();if(s==0){s=100}e=this.sbSize*100/s;if(this.sBarPosition>=100||this.sBarPosition+e>100){this.sBarPosition=100-e;o=0}else{o=100-e-this.sBarPosition}jQuery(this.firstPane).css("height",this.sBarPosition+"%");jQuery(this.splitterBar).css("height",e+"%");jQuery(this.secondPane).css("height",o+"%")}this.setProperty("splitterPosition",this.sBarPosition+"%",true);if(jQuery(this.splitterDIV).height()==0&&!this.splitterDIV.style.height){jQuery(this.splitterDIV).css("height","100px");jQuery(this.splitterBar).css("height","100px")}};h.prototype.setSplitterPosition=function(t){if(this.getDomRef()){this.setProperty("splitterPosition",t,true);this._recalculateInternals()}else{this.setProperty("splitterPosition",t)}return this};h.prototype.setSplitterBarVisible=function(t){if(this.getDomRef()){this.setProperty("splitterBarVisible",t,true);var e=this.getSplitterOrientation()===a.Vertical?"sapUiVertical":"sapUiHorizontal";if(t){jQuery(document.getElementById(this.getId()+"_SB")).removeClass(e+"SplitterBarHidden").addClass(e+"SplitterBar")}else{jQuery(document.getElementById(this.getId()+"_SB")).removeClass(e+"SplitterBar").addClass(e+"SplitterBarHidden")}}else{this.setProperty("splitterBarVisible",t)}return this};h.prototype.fixHeight=function(){var t=jQuery(this.splitterDIV.parentNode).height();var e=jQuery(this.splitterDIV).height();if(t>e){e=t;var i=this.getHeight();if(i&&i.toLowerCase().indexOf("px")!=-1){e=parseInt(i)}if(i&&i.toLowerCase().indexOf("%")!=-1){var r=parseInt(i);if(r<100){e=jQuery(this.splitterDIV).height()}}if(e<=0){e=t}}jQuery(this.splitterDIV).css("height",e+"px");if(this.spOrientation==a.Vertical){jQuery(this.splitterBar).css("height",e+"px")}var o=this.splitterDIV.parentNode;if(o){var n=jQuery.proxy(this.onresizespecial,this);this.sSpecialResizeListenerId=s.register(o,n)}};h.prototype.exit=function(){if(this.sResizeListenerId){s.deregister(this.sResizeListenerId);this.sResizeListenerId=null}if(this.sSpecialResizeListenerId){s.deregister(this.sSpecialResizeListenerId);this.sSpecialResizeListenerId=null}};h.prototype.onresizespecial=function(t){var e=jQuery(this.splitterDIV);var i=e.height();e.css("height","0px");var s=this.getDomRef();if(s&&window.getComputedStyle){window.getComputedStyle(s)}var r=jQuery(t.target).height();var o=e.height();if(o!=r){e.css("height",r+"px");if(this.spOrientation==a.Vertical){jQuery(this.splitterBar).css("height",r+"px")}}if(r<=0){e.css("height",i+"px");if(this.spOrientation==a.Vertical){jQuery(this.splitterBar).css("height",i+"px")}}};h.prototype.onmousedown=function(t){if(t.target!=this.splitterBar){return}var e=jQuery(document.body);e.on("selectstart",jQuery.proxy(this.splitterSelectStart,this));var s=jQuery(this.splitterBar).offset();var r=jQuery(this.splitterBar).height();var o=jQuery(this.splitterBar).width();var n;if(this.spOrientation==a.Vertical){n="sapUiVSBGhost"}else{n="sapUiHSBGhost"}var h=i.getLastZIndex()+5;if(h<20){h=20}jQuery(document.body).append('<div id="'+this.getId()+'_ghost" class="'+n+'" style =" height:'+r+"px; width:"+o+"px; left:"+s.left+"px; top:"+s.top+"px;z-index:"+h+'"></div>');jQuery(document.body).append('<div id="'+this.getId()+'_overlay" style ="left: 0px;'+" right: 0px; bottom: 0px; top: 0px; position:fixed; z-index:"+h+'" ></div>');jQuery(document).on("mouseup",jQuery.proxy(this.onGhostMouseRelease,this));jQuery(document).on("mousemove",jQuery.proxy(this.onGhostMouseMove,this));jQuery(this.splitterBar).trigger("focus");t.preventDefault();t.stopPropagation()};h.prototype.splitterSelectStart=function(t){t.preventDefault();t.stopPropagation();return false};h.prototype.onGhostMouseRelease=function(t){var e,i,s;var r=document.getElementById(this.getId()+"_ghost");var o=sap.ui.getCore().getConfiguration().getRTL();if(this.spOrientation==a.Vertical){if(!o){e=t.pageX-jQuery(this.firstPane).offset().left;s=jQuery(this.splitterDIV).width();e=e*100/s}else{e=t.pageX-jQuery(this.secondPane).offset().left;s=jQuery(this.splitterDIV).width();e=(s-e)*100/s}}else{e=t.pageY-jQuery(this.firstPane).offset().top;i=jQuery(this.splitterDIV).height();e=e*100/i}if(e<this.minSizeFP){e=this.minSizeFP}else if(100-e<this.minSizeSP){e=100-this.minSizeSP}this.sBarPosition=e;this.resizeSplitterElements();jQuery(r).remove();jQuery(document.getElementById(this.getId()+"_overlay")).remove();var n=jQuery(document.body);n.off("selectstart",this.splitterSelectStart);jQuery(document).off("mouseup",this.onGhostMouseRelease);jQuery(document).off("mousemove",this.onGhostMouseMove)};h.prototype.onGhostMouseMove=function(t){var e=document.getElementById(this.getId()+"_ghost");var i;var s;var r=sap.ui.getCore().getConfiguration().getRTL();var o=jQuery(this.firstPane).offset().left;var n=jQuery(this.splitterDIV).width();var h=jQuery(this.secondPane).offset().left;if(this.getSplitterOrientation()==a.Vertical){if(!r){s=o+n*this.minSizeFP/100;i=o+n*(100-this.minSizeSP)/100;if(t.pageX>s&&t.pageX<i){jQuery(e).css("left",t.pageX+"px")}}else{s=h+n*this.minSizeSP/100;i=h+n*(100-this.minSizeFP)/100;if(t.pageX>s&&t.pageX<i){jQuery(e).css("left",t.pageX+"px")}}}else{var p=jQuery(this.splitterDIV).height();s=jQuery(this.firstPane).offset().top+p*this.minSizeFP/100;i=jQuery(this.secondPane).offset().top+jQuery(this.secondPane).height()-p*this.minSizeSP/100;if(t.pageY>s&&t.pageY<i){jQuery(e).css("top",t.pageY+"px")}}};h.prototype.getCtrlKey=function(t){return!!(t.ctrlKey||t.metaKey)};h.prototype.checkModifierKey=function(t,e,i,s){return t.shiftKey==s&&t.altKey==i&&this.getCtrlKey(t)==e};h.prototype.onsaphome=function(t){if(t.target==this.splitterBar){this.sBarPosition=this.minSizeFP;this.resizeSplitterElements();t.preventDefault();t.stopPropagation()}};h.prototype.onsapend=function(t){if(t.target==this.splitterBar){this.sBarPosition=100-this.minSizeSP;this.resizeSplitterElements();t.preventDefault();t.stopPropagation()}};h.prototype.onArrowKeys=function(t,e){var i,s,r,o,n;if(this.spOrientation==a.Vertical){i=jQuery(this.splitterDIV).width();o=jQuery(this.firstPane).width();o=o*100/i;r=10*100/i}else{s=jQuery(this.splitterDIV).height();o=jQuery(this.firstPane).height();o=o*100/s;r=10*100/s}if(e=="false"){n=o-r}else if(e=="true"){n=o+r}if(n<this.minSizeFP){n=this.minSizeFP}else if(100-n<this.minSizeSP){n=100-this.minSizeSP}this.sBarPosition=n;this.resizeSplitterElements()};h.prototype.onsapupmodifiers=function(t){if(this.checkModifierKey(t,false,false,true)){if(t.target==this.splitterBar){if(this.spOrientation==a.Horizontal){this.onArrowKeys(t,"false")}else{this.onsapleftmodifiers(t)}}t.preventDefault();t.stopPropagation()}};h.prototype.onsapdownmodifiers=function(t){if(this.checkModifierKey(t,false,false,true)){if(t.target==this.splitterBar){if(this.spOrientation==a.Horizontal){this.onArrowKeys(t,"true")}else{this.onsaprightmodifiers(t)}}t.preventDefault();t.stopPropagation()}};h.prototype.onsapleftmodifiers=function(t){if(this.checkModifierKey(t,false,false,true)){if(t.target==this.splitterBar){if(this.spOrientation==a.Vertical){var e=sap.ui.getCore().getConfiguration().getRTL();if(e){this.onArrowKeys(t,"true")}else{this.onArrowKeys(t,"false")}}else{this.onsapupmodifiers(t)}}t.preventDefault();t.stopPropagation()}};h.prototype.onsaprightmodifiers=function(t){if(this.checkModifierKey(t,false,false,true)){if(t.target==this.splitterBar){if(this.spOrientation==a.Vertical){var e=sap.ui.getCore().getConfiguration().getRTL();if(e){this.onArrowKeys(t,"false")}else{this.onArrowKeys(t,"true")}}else{this.onsapdownmodifiers(t)}}t.preventDefault();t.stopPropagation()}};h.prototype.ondragstart=function(t){if(t.target!=this.splitterBar){return}t.preventDefault();t.stopPropagation()};h.prototype.getText=function(t,e){var i=sap.ui.getCore().getLibraryResourceBundle("sap.ui.commons");if(i){return i.getText(t,e)}return t};return h});
//# sourceMappingURL=Splitter.js.map