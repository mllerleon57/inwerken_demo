/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","./library","sap/ui/core/CustomStyleClassSupport","sap/ui/core/Element","./Tree"],function(jQuery,e,t,s,i){"use strict";var o=e.TreeSelectionMode;var r=s.extend("sap.ui.commons.TreeNode",{metadata:{library:"sap.ui.commons",deprecated:true,properties:{text:{type:"string",group:"Misc",defaultValue:null},expanded:{type:"boolean",group:"Misc",defaultValue:true},hasExpander:{type:"boolean",group:"Misc",defaultValue:false},icon:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},isSelected:{type:"boolean",group:"Misc",defaultValue:false},selectable:{type:"boolean",group:"Misc",defaultValue:true}},defaultAggregation:"nodes",aggregations:{nodes:{type:"sap.ui.commons.TreeNode",multiple:true,singularName:"node"}},associations:{selectedForNodes:{type:"sap.ui.commons.TreeNode",multiple:true,singularName:"selectedForNode",visibility:"hidden"},ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{toggleOpenState:{parameters:{opened:{type:"boolean"}}},selected:{}}}});r.prototype.getSelectedForNodes=function(){return this.getAssociation("selectedForNodes",[])};r.ANIMATION_DURATION=600;t.apply(r.prototype);r.prototype.expand=function(e,t){this.setProperty("expanded",true,true);var s=null;if(!t){s=a.bind(this)}var i=this.$();if(i.hasClass("sapUiTreeNodeCollapsed")){i.toggleClass("sapUiTreeNodeCollapsed");i.toggleClass("sapUiTreeNodeExpanded");i.attr("aria-expanded","true");var o=this.$("children");if(o){if(e){o.show()}else{o.stop(true,true);o.show(r.ANIMATION_DURATION,s)}o.css({display:"block"})}this.fireToggleOpenState({opened:true})}if(e){var l=this._getNodes();for(var n=0;n<l.length;n++){l[n].expand(e,true)}s&&s()}};r.prototype.collapse=function(e,t){this.setProperty("expanded",false,true);var s=null;if(!t){s=l.bind(this)}var i=this.$();if(i.hasClass("sapUiTreeNodeExpanded")){i.toggleClass("sapUiTreeNodeCollapsed");i.toggleClass("sapUiTreeNodeExpanded");i.attr("aria-expanded","false");var o=this.$("children");if(o){if(e){o.hide()}else{o.stop(true,true);o.hide(r.ANIMATION_DURATION,s)}}this.fireToggleOpenState({opened:false})}if(e){var a=this._getNodes();for(var n=0;n<a.length;n++){a[n].collapse(e,true)}s&&s()}};r.prototype.select=function(e){var t=this.getTree();if(t){t.setSelection(this,e)}else{this._select()}};function a(){var e=this.getTree();if(e){e._adjustSelectionOnExpanding(this)}}function l(){var e=this.getTree();if(e){e._adjustSelectionOnCollapsing(this);e._adjustFocus()}}r.prototype._select=function(e){this.setProperty("isSelected",true,true);if(!e){this.fireSelected()}if(this.getDomRef()){this.$().closest(".sapUiTreeNode").addClass("sapUiTreeNodeSelected").attr("aria-selected","true");this.scrollIntoView()}};r.prototype._deselect=function(e){this.setProperty("isSelected",false,true);if(this.getDomRef()){this.$().removeClass("sapUiTreeNodeSelected").removeAttr("aria-selected")}};r.prototype._getNodes=function(){return this.mAggregations.nodes||[]};r.prototype.hasSelectedHiddenChild=function(){var e=this._getNodes();for(var t=0;t<e.length;t++){if(!e[t].isVisible()&&e[t].getIsSelected()||e[t].hasSelectedHiddenChild()){return true}}return false};r.prototype.setIsSelected=function(e){var t=this.getTree();if(!this.getSelectable()){return this}if(e==this.getProperty("isSelected")){return this}if(t){t._setNodeSelection(this,e,true)}else{this.setProperty("isSelected",e,true)}return this};r.prototype.setSelectable=function(e){if(!e&&this.getIsSelected()){this.setIsSelected(false)}this.setProperty("selectable",e);return this};r.prototype.onclick=function(e){var t=e.target,s=this.getTree();if(jQuery(t).is(".sapUiTreeNode")||jQuery(t).is(".sapUiTreeNodeNotSelectable")){if(jQuery(t).is(".sapUiTreeNodeNotSelectable")){t=jQuery(t).closest(".sapUiTreeNode")[0]}if(jQuery(t).hasClass("sapUiTreeNodeExpanded")){this.collapse()}else{this.expand()}s.placeFocus(t);t.focus()}else if(jQuery(t).is(".sapUiTreeNodeContent")||jQuery(t).is(".sapUiTreeIcon")){var r=i.SelectionType.Select;if(s.getSelectionMode()==o.Multi){if(e.shiftKey){r=i.SelectionType.Range}if(e.metaKey||e.ctrlKey){r=i.SelectionType.Toggle}}s.setSelection(this,false,r);t=jQuery(t).closest(".sapUiTreeNode")[0];s.placeFocus(t);t.focus()}};r.prototype.onsapselect=function(e){if(this.getSelectable()){this.getTree().setSelection(this)}else if(this.getExpanded()){this.collapse()}else{this.expand()}};r.prototype.onsapexpand=function(e){this.expand()};r.prototype.onsapcollapse=function(e){this.collapse()};r.prototype.onsapleft=function(e){if(sap.ui.getCore().getConfiguration().getRTL()){this.expand()}else{this.collapse()}e.preventDefault()};r.prototype.onsapright=function(e){if(sap.ui.getCore().getConfiguration().getRTL()){this.collapse()}else{this.expand()}e.preventDefault()};r.prototype.focus=function(){var e=this.getFocusDomRef();if(e){e.setAttribute("tabindex","0");e.focus()}};r.prototype.blur=function(){var e=this.getFocusDomRef();if(e){e.setAttribute("tabindex","-1")}};r.prototype.getTree=function(){var e=this.getParent();while(e instanceof r){e=e.getParent()}return e};r.prototype.hasChildren=function(){var e=this._getNodes();if(e.length){return true}return false};r.prototype.isVisible=function(){var e=this.getParent();while(e instanceof r){if(!e.getExpanded()){return false}e=e.getParent()}return true};r.prototype.scrollIntoView=function(){var e=this.$(),t=this.getTree().$(),s=t.find(".sapUiTreeCont"),i=e[0].offsetTop,o=s.scrollTop(),r=s.height(),a,l=e[0].offsetLeft,n=s.scrollLeft(),p=s.width(),d;if(i>o+r||i<o){a=i-Math.floor(r*.5);a=Math.max(a,0)}if(l>n+p||l<n){d=l-Math.floor(p*.5);d=Math.max(d,0)}if(a!==undefined||d!==undefined){var u={};if(a!==undefined){u.scrollTop=a}if(d!==undefined){u.scrollLeft=d}s.stop(true,true).animate(u)}};r.prototype.getTooltip_AsString=function(){var e;var t=this.getTooltip();if(typeof t==="string"||t instanceof String){e=t}if(!e){e=this.getText()}return e};return r});
//# sourceMappingURL=TreeNode.js.map